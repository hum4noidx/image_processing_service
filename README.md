# Car detect service imitation

Проект представляет собой сервис, который позволяет загружать изображения с автомобилями и получать координаты
автомобилей на изображении.
Проект выполнен в рамках тестового задания для компании [Интерсвязь](https://www.is74.ru/)

### Необходимые инструменты

- Docker
- Docker Compose

### Настройка

1. Склонируйте репозиторий
2. Создайте файл `.env` в корне проекта и заполните его по примеру `.env_dist`
3. Запустите проект командой `docker-compose up --build`
4. После запуска проекта необходимо накатить миграции. Для этого выполните
   команду `docker exec image_service_backend alembic upgrade head`

## Usage

Для загрузки изображения нужно отправить запрос на `http://0.0.0.0:5000/api/v1/process_image/` с изображением в теле
запроса.

Подробная документация сервисов доступна по следующим адресам:

- http://0.0.0.0:5000/docs - основной сервис
- http://0.0.0.0:5001/docs - сервис для обработки изображений

# Дополнительно

Для повышения выдерживания достаточно большой нагрузки можно использовать очереди сообщений, например RabbitMQ или NATS
Jetstream при обработке изображений.

В идеале, сделать систему статусов обработки изображений, чтобы пользователь мог отслеживать статус обработки
изображения.

Например, изображение отправляется на сервер через POST запрос и становится в очередь на обработку.
Дальше каждые n секунд клиент опрашивает сервер на предмет готовности изображения.
Когда изображение готово, клиент получает ответ с координатами автомобилей.
Это позволит повысить скорость ответа и уменьшить нагрузку на сервер, так как проверить статус задачи легче и быстрее,
чем дожидаться ее выполнения.